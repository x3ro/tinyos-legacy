<html>
<head>
<title>nesC Source Documentation</title>
</head>
<body>
<h1 align="center">nesC Source Documentation</h1>


<h3>Overview</h3> The nesC compiler includes a facility for
automatically generating documentation from nesC source code.  The
basic structure of the generated documentation is taken from the
source code, with one HTML file produced from each nesC source file.
Documentation is not produced for items in included C files, or header
files.
<p>

Program authors can augment the automatically generated documentation
by including specially formatted comments in their source code.  The
formatting of these comments is patterned after the <a
href="http://java.sun.com/docs/books/jls/first_edition/html/18.doc.html">javadoc
documentation specification</a> from SUN's <a href="http://java.sun.com/docs/books/jls/first_edition/html/">
Java language specification</a>.
<p>


<h3>Documentation Comment Style</h3>

Documentation comments in nesC must begin with the characters
<code>/**</code>.  (Note the additional <code>*</code> character,
beyond the requirement for a normal comment.)  These special comments
may be placed in the following locations:
<ul>
<li>At the beginning of a nesC source file.
<li>Before command and event declarations in interfaces 
<li>Before command, event, or task definitions in component implementations
<li>Before the declaration of component-global variables in component implementations
<li>(hopefully soon) Before message struct declarations
</ul>
<p>

Within these comments, the first full sentance (ie, everything before
the first '.' character) is used as a short description of the item,
in various summary lists.  The full text (including the first
sentance) is used for longer descriptions.  
<p>

The documentation parser recognizes the following commands within
documentation-style comments:
<menu>
<dl>
<dt><b>@param</b> <font color="red">paramname</font> <font
color="blue">text text text</font>
<dd>Describes a parameter to a function

<dt><b>@return</b> <font color="blue">text text text</font>
<dd>Describes the return value of a function

<dt><b>@author</b> <font color="blue">text text text</font>
<dd>Lists an author of the file; multiple @author strings are allowed.

<dt><b>@modified</b> <font color="blue">text text text</font>
<dd>Lists a modification.


</dl>
</menu>
<p>

Additionally, HTML tags can be embedded in documentation-style
comments.  This is useful for adding better formatting for things such
as bulleted lists, etc.
<p>


<h3>Example</h3>

The following source snippet illustrates the use of
documentation-style comments.

<menu>
<code>
<pre>
/**
 * One-line component description.
 *
 * More text goes here, to give more details to the description.
 *
 * @author Alice
 * @author Bob
 * @modified 3/3/2003 Added meaningful documentation.
 *
 **/
module Foo {
  provides {
    interface SomeInteface;
  }
  uses {
    interface OtherInterface;
  }
}
implementation {
  /**
   * A state variable.  Why not?
   **/
  bool state;

  /**
   * Do some stuff.  Doing some stuff is better than doing no stuff,
   * although not as good as doing all stuff.
   *
   * @param count The number of things to do.
   * @param size The size of each thing.
   *
   * @return Always returns &lt;code&gt;SUCCESS&lt;/code&gt;
   **/
  command result_t SomeInterface.doStuff(int count, int size) {
    OtherInterface.reallyDoStuff(count,size);
    return SUCCESS;
  }


  /**
   * Handle the response event generated by the
   * OtherInterface.reallyDoStuff() call.  This event handler
   * currently does nothing.
   *
   * @return Always returns &lt;code&gt;SUCCESS&lt;/code&gt;
   **/
  event result_t OtherInterface.stuffDone()
  {
    return SUCCESS;
  }
}
</pre>
</code>
</menu>


<h3>Generating documentation</h3>

Documentation generation is enabled by passing appropriate arguments
to the <code>nesdoc</code> program.  It has similar syntax to the
<code>ncc</code> compiler. For descriptions of these arguments, please
see the <a href="ncc.html">ncc man page</a>. To generate
documentation, passing the same arguments to <code>nesdoc</code> as
one passes to <code>ncc</code> to compile generally works.
		  


<h3>Installing Graphviz</h3>
Basic HTML documentation can be generated with no special
installation.  For nicer display of component graphs, however, we
recommend that you install the graphviz package from AT&amp;T.  
<p>

Using graphviz requires that you have the freefont2 libraries
installed.  Although there are undoubtedly other ways to get things
working, the following steps are known to work on both linux and
cygwin:

<ol>
<li>Install freetype2, libjpeg, libpng, and libz.  Links to these can
be found on the <a href="http://www.graphviz.org/">graphviz web
page</a>.  

<li>Install the latest version of graphviz from 
<a href="http://www.graphviz.org/">www.graphviz.org</a>.  You will
need at least version 1.8.8.  We have verified that things work with
both 1.8.8 and 1.8.9.
</ol>


</body>
</html>


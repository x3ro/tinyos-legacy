PLATFORMS = telosb pc
PLATFORM := $(filter $(PLATFORMS), $(MAKECMDGOALS))

GOALS += registry

PFLAGS += -DDO_NOT_SUPPRESS_EXTRA_BACKTRACKING_MSGS

# Define NODE_ID_SHIFT to be the number by which you want to shift the IDs.
#PFLAGS += -DNODE_ID_SHIFT=0
PFLAGS += -DNODE_ID_SHIFT=1101

PFLAGS += -DUSE_TRACKING_BACKOFF

PFLAGS += -DUSE_BACKTRACKING_BACKOFF 

PFLAGS += -DCALCULATE_NEIGHBORS_BY_DISTANCE

#PFLAGS += -DADJUST_RF_POWER_FOR_TRACKING

#PFLAGS += -DUSE_REGISTRYSTORE

#PFLAGS += -DSEND_BACKTRACKING_DEBUG_MSGS
#PFLAGS += -DSEND_TRACKING_DEBUG_MSGS

PFLAGS += -DUSE_TOSBASE_AS_HEARTBEAT

#PFLAGS += -DUSE_FAKE_DETECTIONS

#This sends detection event msgs (useful for debugging).
#PFLAGS += -DUSE_DETECTIONEVENT

USE_SIMPLE_THRESHOLD = TRUE
ifdef USE_SIMPLE_THRESHOLD
# The simple threshold stuff doesn't let us know about the detected values, 
# so we need to include the raw driver.
PFLAGS += -DUSE_SIMPLE_THRESHOLD
PFLAGS += -DUSE_PIRRAWDRIVER
else
PFLAGS += -DUSE_PIRDETECT
endif

ifndef USE_DRIP
PFLAGS += -I%T/lib/Queue/
PFLAGS += -I%T/lib/Broadcast 
else
# include drip ...
endif

COMPONENT=TestDistributedTracking

#PFLAGS += -DRPC_LEDS

#NO_LOCATION = TRUE
#NO_TIMESYNC = TRUE
NO_FILESET = TRUE
NO_HOOD = TRUE
#NO_REGISTRY = TRUE
#NO_REGISTRY_STORE = TRUE
NO_NUCLEUS = TRUE
NO_RPC = TRUE
NO_RPC_FOR_REGISTRY = TRUE
NO_PYTHON = TRUE
#NO_SENSORS = TRUE
NO_SUPPLEMENT = TRUE
NO_UART = TRUE
#NO_PROMETHEUS = TRUE
#NO_DELUGE = TRUE

KRAKEN_MAKERULES ?= $(TOSDIR)/../contrib/nestfe/make/kraken.Makerules
include $(KRAKEN_MAKERULES)

This program tests setting the DCOCLOCK and the SMCLK on the MSP430.

By default, the DCOCLOCK is configured to run at 4092 kHz off of the
32 kHz crystal and the SMCLK is configured to run at 1/4 the DCO
rate.  This is the hardwired behavior of TinyOS.

Timer A and the UARTs/SPI work off of SMCLK.  (Timer B uses ACLK which
is the 32 kHz crystal). 

To change the frequencies, you need to fix it in MSP430ClockM.nc and
MSP430DCOCalM.nc.  I created a #include file "clock_settings.h" which
specifies the target DCO frequency and SMCLK divisor.  Our local
copies of MSP430ClockM.nc and MSP430DCOCalM.nc now work off of these
values.  Also, the msp430baudrates file has been updated to specify
baudrate settings for a wide variety of SMCLK rates.  These settings
were generated by the msp-uart-table.py script in this directory
(which is based off of the msp-uart.pl script from TinyOS).

The big picture is that you can specify your target DCO frequency and
SMCLK divisor from the command line or Makefile.  Do something like:

   PFLAGS += -DSMCLK_DIVISOR=0 -DDCO_TARGET_KHZ=2048

to set the DCO frequency to 2048 kHz and the SMCLK frequency to 2048
kHz.  Note that the SMCLK divisor is a power of two (i.e., 0 -> /1, 1
-> /2, 2 -> /4, 3 -> /8).


This program uses the alternate function of ports 5.4 and 5.5 (the
green and red LEDs on the TelosB) to mirror MCLK and SMCLK, so you can
test them with an oscilloscope.


     - Andrew Christian <andrew.christian@hp.com>
       April 2005